# Read the file generated using :writeConveyorConfig (fast)
include "#!./gradlew -q printConveyorConfig"
include required("https://raw.githubusercontent.com/hydraulic-software/conveyor/master/configs/jvm/extract-native-libraries.conf")


# Define the full launcher object:
app {

  // Make the name of the program a bit clearer than just "Eton".
  display-name = FreeBox

  // This helps namespace apps, and the metadata will show up in some package managers.
  vendor = machine

  // Render SVG to platform specific formats.
  icons = resources/logo/FreeBox.png

  // This gets included into the Linux packages.
  contact-email = "1357197829@qq.com"

  // When source code is released under an open source license, Conveyor is free.
  vcs-url = github.com/lushunming/FreeBox
  license = Apache 2

 // Upload to GitHub Releases and make download page available via sites.
 site {
   github {
     oauth-token = ${env.OAUTH_TOKEN}
     pages-branch = "gh-pages"
   }
   base-url = https://gh.llkk.cc/https://github.com/lushunming/FreeBox/releases/latest/download
 }

  // Make sure skiko and other native libs are extracted and placed in the app directory as appropriate.
  // See https://hydraulic.software/blog/11-in-jar-signing.html
  jvm.extract-native-libraries = true

  mac {
    info-plist {
      # Require Monterey or higher.
      LSMinimumSystemVersion = 10.15.0
     }
    }
    windows {
      console =true
    }
jvm {
 gui {
    main-class = io.knifer.freebox.FreeBoxApplication
     exe-name = FreeBox

     options = [ "--add-exports=javafx.base/com.sun.javafx.event=ALL-UNNAMED","--add-opens=org.controlsfx.controls/org.controlsfx.control=io.knifer.freebox"]
     console = false
 }
  # 统一模块配置
     options = [
       "--add-modules=javafx.controls,javafx.fxml,javafx.base,javafx.graphics",
       "--add-exports=javafx.base/com.sun.javafx.event=ALL-UNNAMED",
       "--add-opens=org.controlsfx.controls/org.controlsfx.control=io.knifer.freebox"
     ]
}
   #    inputs = [{
   #        from = composeApp/build/compose/tmp/main-release/proguard
   #        remap = [
   #            "**"
   #            "-skiko-awt-runtime-*.jar"
   #        ]
   #      }]

        # Put the dropped JAR back with the right version for each platform.
       #  linux.amd64.inputs = ${app.inputs} [ ${gradle-cache}/caches/modules-2/files-2.1/org.jetbrains.skiko/skiko-awt-runtime-linux-x64/0.7.34/60f05c42be49b3ba7fc98173f4f6e80c3b9de4fd/skiko-awt-runtime-linux-x64-0.7.34.jar ]
       #  mac.aarch64.inputs = ${app.inputs} [ ${gradle-cache}/caches/modules-2/files-2.1/org.jetbrains.skiko/skiko-awt-runtime-macos-arm64/0.7.34/3f7fe53a3c9c0c96dbe07c22ba4a38234ff13487/skiko-awt-runtime-macos-arm64-0.7.34.jar ]
       #  mac.amd64.inputs = ${app.inputs} [ ${gradle-cache}/caches/modules-2/files-2.1/org.jetbrains.skiko/skiko-awt-runtime-macos-x64/0.7.34/466356827dcdb20c4202fa280ff95c41b215313/skiko-awt-runtime-macos-x64-0.7.34.jar ]
       #  windows.amd64.inputs = ${app.inputs} [ ${gradle-cache}/caches/modules-2/files-2.1/org.jetbrains.skiko/skiko-awt-runtime-windows-x64/0.7.34/1a302b2d58bdf6627446a94098672ab982b90fd0/skiko-awt-runtime-windows-x64-0.7.34.jar ]

}


// This line is added automatically when a new project is created. It
// allows Conveyor to change whilst preserving backwards compatibility.

conveyor.compatibility-level = 17
